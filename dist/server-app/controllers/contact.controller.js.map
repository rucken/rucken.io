{"version":3,"file":"contact.controller.js","sourceRoot":"","sources":["../../../server/controllers/contact.controller.ts"],"names":[],"mappings":";;;AAAA,2CAA6D;AAC7D,sCAAmC;AACnC,oEAA+D;AAC/D,8CAAkD;AAGlD,IAAa,iBAAiB,GAA9B,MAAa,iBAAiB;IAC1B,YACqB,aAA4B;QAA5B,kBAAa,GAAb,aAAa,CAAe;IAC7C,CAAC;IAGC,IAAI,CAAQ,GAAG,EAAU,iBAAoC;;YAC/D,IAAI;gBACA,MAAM,OAAO,GAAG,IAAI,eAAM,CAAC,OAAO,CAAC,KAAK,6BAA6B,CAAC;gBACtE,MAAM,IAAI;qBACL,aAAa;qBACb,QAAQ,CAAC;oBACN,EAAE,EAAE,eAAM,CAAC,MAAM,CAAC,KAAK,CAAC,KAAK,CAAC,KAAK;oBACnC,IAAI,EAAE,eAAM,CAAC,MAAM,CAAC,KAAK,CAAC,KAAK,CAAC,KAAK;oBACrC,OAAO;oBACP,QAAQ,EAAE,cAAc;oBACxB,OAAO,kBACH,OAAO,IACJ,iBAAiB,CACvB;iBACJ,CAAC,CAAC;gBACP,OAAO;oBACH,OAAO,EAAE,4BAA4B;iBACxC,CAAC;aACL;YAAC,OAAO,KAAK,EAAE;gBACZ,MAAM,KAAK,CAAC;aACf;QACL,CAAC;KAAA;CACJ,CAAA;AAtBG;IADC,aAAI,EAAE;IACK,mBAAA,YAAG,EAAE,CAAA,EAAO,mBAAA,aAAI,EAAE,CAAA;;qDAAoB,uCAAiB;;6CAqBlE;AA3BQ,iBAAiB;IAD7B,mBAAU,CAAC,UAAU,CAAC;6CAGiB,sBAAa;GAFxC,iBAAiB,CA4B7B;AA5BY,8CAAiB","sourcesContent":["import { Body, Controller, Post, Req } from '@nestjs/common';\nimport { config } from '../config';\nimport { ContactMessageDto } from '../dto/contact-message.dto';\nimport { MailerService } from '../modules/mailer';\n\n@Controller('/contact')\nexport class ContactController {\n    constructor(\n        private readonly mailerService: MailerService\n    ) { }\n\n    @Post()\n    async send(@Req() req, @Body() contactMessageDto: ContactMessageDto) {\n        try {\n            const subject = `[${config.project.title}] Message from contact form`;\n            await this\n                .mailerService\n                .sendMail({\n                    to: config.mailer.users.admin.email,\n                    from: config.mailer.users.robot.email,\n                    subject,\n                    template: 'contact-form',\n                    context: {\n                        subject,\n                        ...contactMessageDto\n                    }\n                });\n            return {\n                message: 'Message sent successfully!'\n            };\n        } catch (error) {\n            throw error;\n        }\n    }\n}\n"]}